
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Truck Profile</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin: auto;
        }

        h1, h2 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .section {
            background: #ffffff;
            border: 1px solid #dcdcdc;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 10px;
        }

        label {
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
        }

        input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 14px;
        }

        .upload {
            margin-top: 10px;
        }

        button {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
            transition: 0.3s;
            width: 100%;
        }

        button:hover {
            background: #218838;
        }

        .add-truck {
            background: #007bff;
        }

        .add-truck:hover {
            background: #0056b3;
        }

        .submit-btn {
            background: #ff9800;
        }

        .submit-btn:hover {
            background: #e68900;
        }

        .driver-box {
            background: #eef5ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #007bff;
        }

        .truck-entry:not(:first-of-type) {
            border-top: 2px dashed #aaa;
            padding-top: 15px;
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>üöõ Truck Profile</h1>

        <form id="truckForm">


            <!-- Business & Contact Information (Fixed) -->
            <div class="section">
                <h2>üè¢ Business & Contact Details</h2>
                <div class="form-group">
                    <label>Business Name:</label>
                    <input type="text" name="business_name" required>
                </div>
                <div class="form-group">
                    <label>Owner Name:</label>
                    <input type="text" name="owner_name" required>
                </div>
                <div class="form-group">
                    <label>Business Address:</label>
                    <input type="text" name="business_address" required>
                </div>
                <div class="form-group">
                    <label>Phone Number:</label>
                    <input type="text" name="business_phone" required>
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" name="business_email" required>
                </div>
            </div>

            <!-- Bank Details (Fixed) -->
            <div class="section">
                <h2>üè¶ Bank Details</h2>
                <div class="form-group">
                    <label>Bank Name:</label>
                    <input type="text" name="bank_name" required>
                </div>
                <div class="form-group">
                    <label>Account Number:</label>
                    <input type="text" name="account_number" required>
                </div>
                <div class="form-group">
                    <label>Routing Number:</label>
                    <input type="text" name="routing_number" required>
                </div>
                <div class="form-group">
                    <label>Bank Tax ID:</label>
                    <input type="text" name="bank_tax_id" required>
                </div>
            </div>

            <!-- Truck Details (Repeatable) -->
            <div class="truck-entry">
                <h2>üöõ Truck Information 1</h2>
                <div class="form-group">
                    <label>VIN #:</label>
                    <input type="text" name="vin_number" required>
                </div>
                <div class="form-group">
                    <label>Make/Model:</label>
                    <input type="text" name="make_model" required>
                </div>
                <div class="form-group">
                    <label>License Plate #:</label>
                    <input type="text" name="license_plate" required>
                </div>
                <div class="form-group">
                    <label>Value of Truck ($):</label>
                    <input type="text" name="truck_value" required>
                </div>
                <div class="form-group">
                    <label>Unit Number:</label>
                    <input type="text" name="unit_number">
                </div>
                <div class="form-group">
                    <label>Werner Number (if any):</label>
                    <input type="text" name="werner_number">
                </div>
                <div class="form-group">
                    <label>Color:</label>
                    <input type="text" name="color" required>
                </div>

                <!-- Driver 1 -->
                <div class="driver-box">
                    <h3>üë®‚Äç‚úàÔ∏è Driver 1 Details</h3>
                    <div class="form-group">
                        <label>Driver Name:</label>
                        <input type="text" name="driver1_name" required>
                    </div>
                    <div class="form-group">
                        <label>Phone Number:</label>
                        <input type="text" name="driver1_phone" required>
                    </div>
                    <div class="form-group">
                        <label>Address:</label>
                        <input type="text" name="driver1_address" required>
                    </div>
                    <div class="form-group">
                        <label>Social Security Number:</label>
                        <input type="text" name="driver1_ssn" required>
                    </div>
                    <div class="form-group">
                        <label>DOT Medical Expiry Date:</label>
                        <input type="date" name="driver1_dot_medical_expiry" required>
                    </div>
                    <div class="upload">
                        <label>Upload Driver Documents:</label>
                        <input type="file" name="driver1_docs">
                    </div>
                </div>

                <!-- Driver 2 (Same Fields) -->
                <div class="driver-box">
                    <h3>üë®‚Äç‚úàÔ∏è Driver 2 Details</h3>
                    <div class="form-group">
                        <label>Driver Name:</label>
                        <input type="text" name="driver2_name">
                    </div>
                    <div class="form-group">
                        <label>Phone Number:</label>
                        <input type="text" name="driver2_phone">
                    </div>
                    <div class="form-group">
                        <label>Address:</label>
                        <input type="text" name="driver2_address">
                    </div>
                    <div class="form-group">
                        <label>Social Security Number:</label>
                        <input type="text" name="driver2_ssn">
                    </div>
                    <div class="form-group">
                        <label>DOT Medical Expiry Date:</label>
                        <input type="date" name="driver2_dot_medical_expiry">
                    </div>
                    <div class="upload">
                        <label>Upload Driver Documents:</label>
                        <input type="file" name="driver2_docs">
                    </div>
                </div>

                <!-- Logbook ID & Domicile/Home -->
                <div class="form-group">
                    <label>Logbook ID:</label>
                    <input type="text" name="logbook_id" required>
                </div>
                <div class="form-group">
                    <label>Domicile/Home:</label>
                    <input type="text" name="domicile_home" required>
                </div>
            </div>

            <button type="button" class="add-truck">+ Add Another Truck</button>
            <button type="submit" class="submit-btn">‚úÖ Submit</button>
        </form>
    </div>

    <script>
        let truckCount = 1;

        document.querySelector('.add-truck').addEventListener('click', function() {
            truckCount++;
            let newEntry = document.createElement('div');
            newEntry.classList.add('truck-entry');
            newEntry.innerHTML = document.querySelector('.truck-entry').innerHTML;
            newEntry.querySelector('h2').textContent = `üöõ Truck Information ${truckCount}`;
            document.getElementById('truckForm').insertBefore(newEntry, this);
        });
    </script>

<script>
document.getElementById("truckForm").addEventListener("submit", function(event) {
    event.preventDefault(); // Prevents the default form submission

    const formData = new FormData(this);

    fetch(this.action, {
        method: "POST",
        body: formData,
        headers: { "Accept": "application/json" }
    }).then(response => {
        if (response.ok) {
            alert("‚úÖ Form submitted successfully!");
            document.getElementById("truckForm").reset(); // Clears the form after submission
        } else {
            alert("‚ùå Error submitting form. Please try again.");
        }
    }).catch(error => {
        alert("‚ùå Network error. Please check your connection.");
    });
});
</script>
<script>
    fetch(this.action, {
    method: "POST",
    body: formData,
    headers: { "Accept": "application/json" }
}).then(response => {
    if (response.ok) {
        window.location.href = "thank_you.html"; // Redirect to a "Thank You" page
    }
});
</script>
            <script type="module">
  // Import the functions you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";
  import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-database.js";

  // Your Firebase Configuration
  const firebaseConfig = {
    apiKey: "AIzaSyBI6hU2DqzS1I7w9uuILDnCJELzGyi-3DM",
    authDomain: "truckformdb.firebaseapp.com",
    databaseURL: "https://truckformdb-default-rtdb.firebaseio.com",
    projectId: "truckformdb",
    storageBucket: "truckformdb.appspot.com",
    messagingSenderId: "684328424853",
    appId: "1:684328424853:web:20dfb4b7111b784462d29c",
    measurementId: "G-PGH1X1BVX0"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app); // Get database reference

  // Function to handle form submission
  document.getElementById("truckForm").addEventListener("submit", function(event) {
    event.preventDefault(); // Prevent form from refreshing the page

    // Get form values
    const businessName = document.querySelector("input[name='business_name']").value;
    const ownerName = document.querySelector("input[name='owner_name']").value;
    const businessAddress = document.querySelector("input[name='business_address']").value;
    const businessPhone = document.querySelector("input[name='business_phone']").value;
    const businessEmail = document.querySelector("input[name='business_email']").value;

    // Truck Information
    const vinNumber = document.querySelector("input[name='vin_number']").value;
    const makeModel = document.querySelector("input[name='make_model']").value;
    const licensePlate = document.querySelector("input[name='license_plate']").value;
    const truckValue = document.querySelector("input[name='truck_value']").value;

    // Driver 1 Information
    const driver1Name = document.querySelector("input[name='driver1_name']").value;
    const driver1Phone = document.querySelector("input[name='driver1_phone']").value;
    const driver1Address = document.querySelector("input[name='driver1_address']").value;

    // Push data to Firebase
    const truckDataRef = push(ref(database, "trucks")); // Create a unique entry
    set(truckDataRef, {
      business: {
        name: businessName,
        owner: ownerName,
        address: businessAddress,
        phone: businessPhone,
        email: businessEmail
      },
      truck: {
        vin: vinNumber,
        makeModel: makeModel,
        licensePlate: licensePlate,
        value: truckValue
      },
      driver1: {
        name: driver1Name,
        phone: driver1Phone,
        address: driver1Address
      }
    }).then(() => {
      alert("Data submitted successfully!");
      document.getElementById("truckForm").reset(); // Reset the form
    }).catch((error) => {
      console.error("Error saving data:", error);
      alert("Error saving data, please try again.");
    });
  });
</script>

</body>
</html>
